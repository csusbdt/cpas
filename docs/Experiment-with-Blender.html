<html>
  <head>
    <title>website</title>
    <!-- stylesheet from http://www.bootcdn.cn/github-markdown-css/ -->
    <link rel="stylesheet" href="github-markdown.css">
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }
    </style>
  </head>
  <body>
    <div class='markdown-body'>
      <a href="Home.html">home</a> 
      <a href="https://github.com/csusbdt/cpas/wiki">wiki</a> <br>
      <h1>CSE 1010</h1>
<h2>Reference</h2>
<ul>
<li><a href="https://docs.blender.org/api/blender_python_api_current/">Blender API documentation</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/">Blender Reference Manual</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/render/workflows/command_line.html">Blender Command Line</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/advanced/command_line/arguments.html">Blender Command Line Arguments</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/editors/python_console.html">Blender Python Console</a></li>
<li><a href="https://en.wikibooks.org/wiki/Blender_3D:_HotKeys/All">Blender Hot Keys</a></li>
</ul>
<h2>Installation</h2>
<p><a href="https://docs.blender.org/manual/en/dev/getting_started/installing/index.html">Install Blender</a>.</p>
<p>Read <a href="https://docs.blender.org/manual/en/dev/advanced/command_line/introduction.html">Advanced &gt; Command Line &gt; Introduction</a>
to learn how to run Blender from the command line.
On my Mac, I launched Blender from the command line with the following command.</p>
<pre><code>/Applications/blender.app/Contents/MacOS/blender
</code></pre>

<p>If you are running under Mac OS X, then you can create an alias to allow easier access to blender from the command line.
One way to do this is add the following to <em>.bash_profile</em> in your home directory.</p>
<pre><code>alias blender=/Applications/blender.app/Contents/MacOS/blender
</code></pre>

<p>Note that the above command I used is different than the example shown in the Blender documentation.  You may need to similarly adjust what you read in the documentation.</p>
<p>Take careful notice of <a href="https://docs.blender.org/manual/en/dev/advanced/command_line/arguments.html#argument-order">Argument Order</a>
when running Blender from the command line.</p>
<h2>Get familiar with the documentation</h2>
<p>Spend some time with the Blender documentation to get a better idea about what Blender
can do and how it works.</p>
<ul>
<li><a href="https://docs.blender.org/manual/en/dev/index.html">Blender Reference Manual</a></li>
</ul>
<p>When working inside Blender's application window,
it's helpful to know a few hot keys.</p>
<ul>
<li><a href="https://en.wikibooks.org/wiki/Blender_3D:_HotKeys/All">Blender Hot Keys</a></li>
</ul>
<h2>Experiment with the Blender User Interface</h2>
<p>Start Blender and look around.
Read pieces of the Blender documentation.
We won't need to know much about how to use Blender through its user interface
because we will use Blender primarily through its application programming interface (API).
We will focus on using the Blender API to generate 3D visualizations.
We will access the functionality of the API by submitting Python scripts to an instance of Blender
primarily running as a background process, that is, without an application window.</p>
<p>When you start Blender, you see a scene that contains a cube, camera and light source.
We will use this as our starting point for a series of experiments.</p>
<p>In these experiments, the following hot key sequences will be useful.</p>
<table>
<thead>
<tr>
<th>hot key</th>
<th>action</th>
</tr>
</thead>
<tbody>
<tr>
<td>SHIFT-F4</td>
<td>select Console view</td>
</tr>
<tr>
<td>SHIFT-F5</td>
<td>select 3D view</td>
</tr>
<tr>
<td>F12</td>
<td>render (what the camera sees)</td>
</tr>
</tbody>
</table>
<p>Inside Blender, press F12 to render the current view.
Press ESCAPE to exit the render view.</p>
<p>Continue to experiment as follows.
Have your mouse anywhere inside the large view pane and then
press SHIFT-F4 to change the view to the Python console.
Press SHIFT-F5 to change back to the 3D view.</p>
<p>Run the following code from the Python console to move the cube
by 3 units in the positive X direction.</p>
<pre><code>bpy.data.objects['Cube'].location.x = 3
</code></pre>

<p>Notice how the cube has been moved.
Press F12 to render the camera view again and notice again that the cube has been moved.</p>
<h2>Blend-files</h2>
<p>A Blend-file is a Blender data file that stores a collection of scenes
and possibly other objects.
When you start Blender, a default Blend-file is automatically loaded.
However, it doesn't yet refer to a saved file.
You can think of it as Blender's current state.
You won't need to work with saved Blend-files at this point,
but if you ever do, the state of Blender can be saved to and read from a Blend-file.</p>
<h2>Experiment with the command line</h2>
<p>Now let's see if we can move the cube from the command line.
Create file <em>cube.py</em> with the following contents.</p>
<pre><code>import bpy

cube = bpy.data.objects['Cube']
cube.location.x = 3

bpy.data.scenes['Scene'].render.filepath = 'cube.png'
bpy.ops.render.render(write_still=True)
</code></pre>

<p>Try to analyze the code to see what it is doing.
Observe its effects when run from the command line as follows.</p>
<pre><code>blender -b -P cube.py
</code></pre>

<p>This will generate an image file <em>cube.png</em> that shows the scene as rendered through the camera,
which is a grey box moved from its original location.</p>
<h2>Trouble-shooting code</h2>
<p>When a script malfunctions, we need a way to inspect the code at different points of execution.
If we were running code in an integrated development environment (IDE) such as Visual Studio and XCode,
we would most likely be able to set break points in the code to pause the program and inspect the state of variables.</p>
<p>Similar to setting break points, we can enter into interactive mode at any point in our code.</p>
<p>I found this approach described in <a href="https://docs.blender.org/api/blender_python_api_2_59_2/info_tips_and_tricks.html">Tips and Tricks</a>.
Here is an example of how to pause a script to let the user execute Python code.</p>
<pre><code>import bpy
cube = bpy.data.objects['Cube']
cube.location.x = 3

import code
namespace = globals().copy()
namespace.update(locals())

# Enter interactive mode; press Ctrl-D to terminate.
code.interact(local=namespace)  

bpy.data.scenes['Scene'].render.filepath = 'cube.png'
bpy.ops.render.render(write_still=True)
</code></pre>

<p>When you run this script, try setting the x coordinate back to 0
and set the z coordinate to 2 (moves the cube up).
Press Ctrl-D to end interactive mode.
Verify that the image shows the cube in the new location.</p>
<!--

__HERE__


## Experiment with the command line

When you first start Blender, it will show a cube.
This cube is in a scene with a camera pointed at it.
When you render the scene, you do it through this camera.
In this experiment, we will generate an image of the cube
as seen through the camera.

Run Blender and observe the grey cube.

From the command line, run the following to produce the first frame
of animation (frame 0) as seen through the camera.


wzxhzdk:6


This command will generate an image file named _0.png_ in the current directory.
The `-o` argument tells Blender how to name the image file and where to store it.
The leading `//` tells Blender that the pathname should be considered relative
to the current directory.  The single has mark `#` tells Blender that you want
to use a single digit from the frame number in the file name.  The `.png` tells
Blender what to append onto the frame number when forming the name.
The result is a file named _0.png_ because we specified frame number 0 with the argument `-f 0`.

After running the command, verify that this file is an image of the default cube that Blender creates
when it is started without a Blend-file.

The `-b` in the command specifies that Blender is to run in the background.
In other words, the command will not open the Blender application Window.

To better understand Blender's command line operation, read the following.

* [Command Line](https://docs.blender.org/manual/en/dev/advanced/command_line/index.html)
* [Docs » Render » Workflows » Command Line](https://docs.blender.org/manual/en/dev/render/workflows/command_line.html)

The above command uses the blender render engine; try the following to see the results with the Cycles render engine.


wzxhzdk:7


Note that the argument order on the Blender command line is significant.
Try to run the above commands with the arguments in a different order and observe the result.
For example, the following command saves the image file in a temporary directory that is not under
the current directory because the `-o //#.png` argument comes after the argument specifying the
frame number `-f 0`.


wzxhzdk:8


Let's now accomplish the same result using a Python script.
For this purpose, create _cube.py_ with the following lines of code.


wzxhzdk:9


Run the script as follows.


wzxhzdk:10


Verify that this command produced an image file _cube.png_in the current directory
that shows the scene as viewed through the scene camera.

To prepare yourself for eventual problems, repeat the above experiment with a syntax error in the code.
Notice how the error is reported to you.
You will have errors in your code in the future
so doing this experiment will show you how these types of errors are reported.



# TODO:

I'm reading [Scripting and Extending Blender](https://docs.blender.org/manual/en/dev/advanced/scripting/index.html)
and thinking about going through a video tutorial.

Must check out the [Blender Add-ons Catalog](https://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts);
it contains scripts to add geometry and do other interesting things.



__TODO: RESTART FROM HERE__







__New challenge:__ write a script that turns on halo rendering for the box.


Problem: Render text or a simple cube from the command line.
Use [Halo Rendering](https://docs.blender.org/manual/en/dev/render/blender_render/materials/special_effects/halo.html).


The following is an example of rendering an animation from the command line.


wzxhzdk:11


The _--enable-autoexec_ option will run initialization scripts in myanim.blend.





The next thing I read was [Data System](https://docs.blender.org/manual/en/dev/data_system/index.html).

The following are notes I took from 
[Data System > Introduction](https://docs.blender.org/manual/en/dev/data_system/introduction.html).

* The Blender UI includes an Outliner editor that lets you view the hierarchical structure of the blend-file.
* Various data such as images can be _packed_ in a blend-file.
* Most data in a blend-file is in a _data-block_ although some data is not, such as bones, sequence strips and vertex groups.
* Use custom properties to store arbitrary data in data-blocks, bones, sequence strips.

The following are notes I took from
[Data System > Scenes](https://docs.blender.org/manual/en/dev/data_system/scenes/index.html)

The scene properties that may be relevant to our problem include the following.

* camera - currently selected camera
* background - true if the scene will be used as a background to another scene
* active clip - not sure what this is

The following are notes I took from
[Data System > Relative Paths](https://docs.blender.org/manual/en/dev/data_system/files/relative_paths.html).

You cannot enter relative paths into a new untitled blend-file; save it before linking to external files.

From the _Save As_ function, you have the option to select _Remap Relative_ to relocate a blend-file relative to its linked resources.




_Optional Assignment:_ Create an [Application Template](https://docs.blender.org/manual/en/dev/advanced/app_templates.html) that is used with your scene generation code.

Make note of [Python Errors](https://docs.blender.org/manual/en/dev/troubleshooting/python.html).

Use the [Glossary](https://docs.blender.org/manual/en/dev/glossary/index.html) as needed.

Do a cursory reading of [Modeling](https://docs.blender.org/manual/en/dev/modeling/index.html).

Problem: Create an animation that involves [Text](https://docs.blender.org/manual/en/dev/modeling/texts/index.html).

Do a cursory reading of [Painting and Sculpting](https://docs.blender.org/manual/en/dev/sculpt_paint/index.html).
Read the overview paragraph of the [Introduction to Sculpting](https://docs.blender.org/manual/en/dev/sculpt_paint/sculpting/introduction.html).

Do a cursory reading of Read [Render](https://docs.blender.org/manual/en/dev/render/index.html).

-->
    </div>
  </body>
</htlm>
