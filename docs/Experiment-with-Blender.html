<html>
  <head>
    <title>website</title>
    <!-- stylesheet from http://www.bootcdn.cn/github-markdown-css/ -->
    <link rel="stylesheet" href="github-markdown.css">
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }
    </style>
  </head>
  <body>
    <div class='markdown-body'>
      <a href="Home.html">home</a> 
      <a href="https://github.com/csusbdt/cpas/wiki">wiki</a> <br>
      <h1>CSE 1010</h1>
<h2>Reference</h2>
<ul>
<li><a href="https://docs.blender.org/api/blender_python_api_current/">Blender API documentation</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/">Blender Reference Manual</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/render/workflows/command_line.html">Blender Command Line</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/advanced/command_line/arguments.html">Blender Command Line Arguments</a></li>
<li><a href="https://docs.blender.org/manual/en/dev/editors/python_console.html">Blender Python Console</a></li>
<li><a href="https://en.wikibooks.org/wiki/Blender_3D:_HotKeys/All">Blender Hot Keys</a></li>
</ul>
<h2>Installation</h2>
<p><a href="https://docs.blender.org/manual/en/dev/getting_started/installing/index.html">Install Blender</a>.</p>
<p>Read <a href="https://docs.blender.org/manual/en/dev/advanced/command_line/introduction.html">Advanced &gt; Command Line &gt; Introduction</a>
to learn how to run Blender from the command line.
On my Mac, I launched Blender from the command line with the following command.</p>
<pre><code>/Applications/blender.app/Contents/MacOS/blender
</code></pre>

<p>If you are running under Mac OS X, then you can create an alias to allow easier access to blender from the command line.
One way to do this is add the following to <em>.bash_profile</em> in your home directory.</p>
<pre><code>alias blender=/Applications/blender.app/Contents/MacOS/blender
</code></pre>

<p>Note that the above command I used is different than the example shown in the Blender documentation.  You may need to similarly adjust what you read in the documentation.</p>
<p>Take careful notice of <a href="https://docs.blender.org/manual/en/dev/advanced/command_line/arguments.html#argument-order">Argument Order</a>
when running Blender from the command line.</p>
<h2>Get familiar with the documentation</h2>
<p>Spend some time with the Blender documentation to get a better idea about what Blender
can do and how it works.</p>
<ul>
<li><a href="https://docs.blender.org/manual/en/dev/index.html">Blender Reference Manual</a></li>
</ul>
<p>When working inside Blender's application window,
it's helpful to know a few hot keys.</p>
<ul>
<li><a href="https://en.wikibooks.org/wiki/Blender_3D:_HotKeys/All">Blender Hot Keys</a></li>
</ul>
<h2>Experiment with the Blender user interface</h2>
<p>Start Blender and look around.
Read pieces of the Blender documentation.
We won't need to know much about how to use Blender through its user interface
because we will use Blender primarily through its application programming interface (API).
We will focus on using the Blender API to generate 3D visualizations.
We will access the functionality of the API by submitting Python scripts to an instance of Blender
primarily running as a background process, that is, without an application window.</p>
<p>When you start Blender, you see a scene that contains a cube, camera and light source.
We will use this as our starting point for a series of experiments.</p>
<p>In these experiments, the following hot key sequences will be useful.</p>
<table>
<thead>
<tr>
<th>hot key</th>
<th>action</th>
</tr>
</thead>
<tbody>
<tr>
<td>SHIFT-F4</td>
<td>select Console view</td>
</tr>
<tr>
<td>SHIFT-F5</td>
<td>select 3D view</td>
</tr>
<tr>
<td>SHIFT-F9</td>
<td>select Outliner view</td>
</tr>
<tr>
<td>F12</td>
<td>render (what the camera sees)</td>
</tr>
</tbody>
</table>
<p>Inside Blender, press F12 to render the current view.
Press ESCAPE to exit the render view.</p>
<p>Continue to experiment as follows.
Have your mouse anywhere inside the large view pane and then
press SHIFT-F4 to change the view to the Python console.
Press SHIFT-F5 to change back to the 3D view.</p>
<p>Press SHIFT-F9 to go into the Outliner view.
(Make sure the mouse pointer is inside of the panel you want the Outliner
view to appear in.)
Experiment by selecting other objects in the scene, such as the camera or the lamp.
After selecting a different object, press SHIFT-F5 to go to 3D view.
Observe how the selection has changed.
The Outliner view provides a hierarchical view of the contents of the current scene.</p>
<h2>Experiment with Blender's Python console</h2>
<p>Run the following code from the Python console to move the cube
by 3 units in the positive X direction.</p>
<pre><code>bpy.data.objects['Cube'].location.x = 3
</code></pre>

<p>Notice how the cube has been moved.
Press F12 to render the camera view again and notice again that the cube has been moved.</p>
<p>Now do the following experiment to understand how object locations can be viewed and changed
from the Blender's user interface.
Make sure that the cube is the currently selected object (the <em>active object</em>).
Switch to 3D view and look at the tabbed panels to the left of the area.
Make sure the Tools tab is selected.
Under Transform, click on the Translate button.
Observe the X, Y and Z values that are displayed for the object translation.
Experiment with changing these values.</p>
<p><strong>TODO:</strong></p>
<p>To become familiar with other operations you can perform in code,
see <a href="https://docs.blender.org/api/blender_python_api_current/bpy.ops.html">Operators (bpy.ops)</a>.</p>
<h2>Blend-files</h2>
<p>A Blend-file is a Blender data file that stores a collection of scenes
and possibly other objects.
When you start Blender, a default Blend-file is automatically loaded.
However, it doesn't yet refer to a saved file.
You can think of it as Blender's current state.
You won't need to work with saved Blend-files at this point,
but if you ever do, the state of Blender can be saved to and read from a Blend-file.</p>
<p>But there is a concern I read about in
<a href="https://docs.blender.org/manual/en/dev/data_system/files/relative_paths.html">Data System &gt; Relative Paths</a>
that may force us to use Blend-files:
<em>You cannot enter relative paths into a new untitled blend-file; save it before linking to external files.</em>
My concern is that if we use relative paths in our code to refer to linked resources (images, models, etc.),
then we need to save the Blender's state as a Blend-file.
I'm guessing that this sets a current location internally.
It's possible to set this current location using Python;
I need to do more research on this.</p>
<p>One result is that when you relocate the Blend-file, you need to use the <em>Save As</em> function to store the file
in the new location.  When you do this, select <em>Remap Relative</em> to relocate a blend-file relative to its linked resources.</p>
<h2>Experiment with the command line</h2>
<p>Now let's see if we can move the cube from the command line.
Create file <em>cube.py</em> with the following contents.</p>
<pre><code>import bpy

cube = bpy.data.objects['Cube']
cube.location.x = 3

bpy.data.scenes['Scene'].render.filepath = 'cube.png'
bpy.ops.render.render(write_still=True)
</code></pre>

<p>Try to analyze the code to see what it is doing.
Observe its effects when run from the command line as follows.</p>
<pre><code>blender -b -P cube.py
</code></pre>

<p>This will generate an image file <em>cube.png</em> that shows the scene as rendered through the camera,
which is a grey box moved from its original location.
This is the view you saw inside Blender when pressing F12.</p>
<p>To prepare yourself for eventual problems, repeat the above experiment 
with a syntax error in the code.
For example, change <code>import bpy</code> to <code>import xbpy</code> and then try to run the code.
Notice how the error is reported to you.
You will have errors in your code in the future
so doing this experiment will show you how these types of errors are reported.</p>
<h2>Trouble-shooting code</h2>
<p>When a script has errors, we need a way to inspect the code within it at different points of execution.
If we were running code in an integrated development environment (IDE) such as Visual Studio and XCode,
we would be able to set break points to pause program execution.
When execution is paused, we can inspect the state of variables or even change their values
before resuming execution.</p>
<p>Similar to setting break points in an IDE, we can enter into interactive mode at any point in our code.</p>
<p>I found this approach described in <a href="https://docs.blender.org/api/blender_python_api_2_59_2/info_tips_and_tricks.html">Tips and Tricks</a>.
Here is an example of how to pause a script to let the user execute Python code.</p>
<pre><code>import bpy
cube = bpy.data.objects['Cube']
cube.location.x = 3

import code
namespace = globals().copy()
namespace.update(locals())

# Enter interactive mode; press Ctrl-D to terminate.
code.interact(local=namespace)  

bpy.data.scenes['Scene'].render.filepath = 'cube.png'
bpy.ops.render.render(write_still=True)
</code></pre>

<p>When you run this script, try setting the x coordinate back to 0
and set the z coordinate to 2 (moves the cube up).
Press Ctrl-D to end interactive mode.
Verify that the image shows the cube in the new location.</p>
<p><em>Optional setup:</em></p>
<p>It's possible to go further in this direction by
<a href="https://wiki.blender.org/index.php/User:Ideasman42/BlenderAsPyModule">building Python as a module</a>.
Doing this will allow you to run your code inside of an IDE that allows break points,
code completion, etc.
If I were to try to set this up, I would do a <em>local install</em> of Python 3.5 to separate it from
the non-local installation of Python, which has a different version.
Then, I would access this version of Python through the virtual environment mechanism.
See <a class="wikilink" href="Working-in-a-Python3-Virtual-Environment.html">Working in a Python3 Virtual Environment</a> to set this up.</p>
<p>However, building Blender as a Python module is not covered in the course.
This is an optional activity.</p>
<hr />
<p><strong>TODO: RESTART FROM HERE</strong></p>
<p>The page <a href="https://docs.blender.org/manual/en/dev/advanced/scripting/index.html">Scripting and Extending Blender</a>
contains links to video tutorials on scripting Blender.</p>
<p>Must check out the <a href="https://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts">Blender Add-ons Catalog</a>;
it contains scripts to add geometry and do other interesting things.</p>
<p>Problem: Render text or a simple cube from the command line.
Use <a href="https://docs.blender.org/manual/en/dev/render/blender_render/materials/special_effects/halo.html">Halo Rendering</a>.</p>
<p><em>Optional Assignment:</em> Create an <a href="https://docs.blender.org/manual/en/dev/advanced/app_templates.html">Application Template</a> that is used with your scene generation code.</p>
<p>Problem: Create an animation that involves <a href="https://docs.blender.org/manual/en/dev/modeling/texts/index.html">Text</a>.</p>
<p>Make note of <a href="https://docs.blender.org/manual/en/dev/troubleshooting/python.html">Python Errors</a>.</p>
<p>The following are notes I took from 
<a href="https://docs.blender.org/manual/en/dev/data_system/introduction.html">Data System &gt; Introduction</a>.</p>
<ul>
<li>The Blender UI includes an Outliner editor that lets you view the hierarchical structure of the blend-file.</li>
<li>Various data such as images can be <em>packed</em> in a blend-file.</li>
<li>Most data in a blend-file is in a <em>data-block</em> although some data is not, such as bones, sequence strips and vertex groups.</li>
</ul>
<p>see https://caretdashcaret.com/2014/09/30/how-to-select-an-object-in-blender-using-the-api/</p>
    </div>
  </body>
</htlm>
